var CourseSuggestions,cs,lang;(CourseSuggestions=function(t){var e,s,i;i=window.location.host.match("courses")||window.location.host.match("cyrsiau")?"60%":"86%",e="cy"===t?"cyrsiau.aber.ac.uk/":"courses.aber.ac.uk/",this.lang=t,this.suggest_width=i,this.course_domain=e,this.study_level="",this.host=window.location.host,this.path=window.location.pathname,this.suggestions=[],this.search="",this.uris=[],this.subject_links=[],this.setCourses=function(t){return this.courses=t},null!==(s=RegExp("study-level=(.+?)(&|$)").exec(location.search))&&$(":radio[value="+s[1]+"]").prop("checked",!0)}).prototype.initSubjectLinks=function(){var s,t;return t=[],s={UG:{key:"undergraduate-courses",opposite:"postgraduate-courses"},PG:{key:"postgraduate-courses",opposite:"undergraduate-courses"}},$("#subjects").find("li a").each(function(){var e;return t.push($.extend($(this))),e=this.attr("href"),{clearHash:function(){return this.attr("href",e.replace(e.substring(e.indexOf("#")),""))},updateHash:function(t){if("-1"===this.attr("href").indexOf("#")){if(void 0!==s[t].key)return this.attr("href",this.attr("href")+"#"+s[t].key)}else if(void 0!==s[t].key)return this.attr("href",e.replace(e.substring(e.indexOf("#")+1,s[t].key)))}}}),t},CourseSuggestions.prototype.updateSubjectLinks=function(s){var t;return t=/.*?#(undergraduate-courses|postgraduate-courses)/g,function(){return t.exec($(sl[0]).attr("href")),""===s?$.each(this.subject_links,function(t,e){return this.clearHash()}):$.each(this.subject_links,function(t,e){return this.updateHash(s)})}},CourseSuggestions.prototype.getUri=function(t,e){var s;return s="pg|"===t?"postgraduate/":"undergraduate/","//"+cs.course_domain+s+cs.uris[e]},CourseSuggestions.prototype.suggest=function(){return $("#autocomplete").autocomplete({lookup:this.suggestions,dataType:"json",maxHeight:400,width:cs.suggest_width,appendTo:$("#results"),beforeRender:function(t){var e;return e=0<$("input[name=study_level]").length?$("input[name=study_level]:checked").val().toLowerCase():0<cs.path.indexOf("postgrad")?"pg":"ug",cs.setCourses($(t).find("div.autocomplete-suggestion")),cs.courses.each(function(t){return""===e?"pg|"===$(this).html().substring(0,3)?$(this).addClass("pg"):"ug|"===$(this).html().substring(0,3)&&$(this).addClass("ug"):$(this).html().substring(0,2)!==e&&$(this).hide(),$(this).html($(this).html().split("|")[1])})},onSelect:function(t){var e;return e=cs.getUri(t.value.substring(0,3),t.data),$("#autocomplete-submit").hide(),$("#autocomplete").val(t.value.split("|")[1]),window.location.href=e}})},CourseSuggestions.prototype.init=function(t){return this.suggestions=t,[],$.each(this.suggestions,function(t,e){if(void 0!==e.uri)return cs.uris[e.data]=e.uri}),$.each(this.suggestions,function(t,e){if(void 0!==e.keywords)return e.value+="|"+e.keywords}),$("#autocomplete").on("click",function(){return cs.search=$(this).val()}),$("#autocomplete").keypress(function(t){if(13===t.which)return $("#compromise").submit()}),this.suggest()},void 0===lang&&(lang="en"),(window.location.host.match("cyrsiau")||window.location.pathname.match("/cy/"))&&(lang="cy"),0<$("#your-results").length&&$("html, body").delay("200").animate({scrollTop:$("#your-results").offset().top},10),(cs=new CourseSuggestions(lang))&&$.ajax({type:"GET",dataType:"script",url:"/course-searches/suggestions/?lang="+cs.lang+"&referrer="+document.location.pathname}).done(function(t){if(cs.init(suggestions),"ac.uk/"===document.location.href.slice(-6))return cs.subject_links=cs.initSubjectLinks(),$("input[name='study_level']").each(function(){return $(this).click(function(){return cs.updateSubjectLinks($(this).val())})})});